---
title: "Reimplement matching"
editor: visual
editor_options: 
  chunk_output_type: console
---

```{r}
library(tidyverse)
library(aws.s3)
library(terra)
library(tictoc)
library(stars)
library(rgee)
```


```{r}
ee_install()
```




```{r}


processed_rasters <- get_bucket_df(
  bucket = "fbedecarrats",
  prefix = "Replication_wolf/data_processed/rasters",
  region = "") %>%
  pluck("Key")

# A function to iterate/vectorize copy
save_from_s3 <- function(x, y) {
  aws.s3::save_object(
    object = x,
    bucket = "fbedecarrats",
    file = y,
    overwrite = TRUE,
    region = "")
  }

dest_processed <- str_remove(processed_rasters, "Replication_wolf/")
map2(processed_rasters, dest_processed, save_from_s3)

gee_stars <- read_stars(dest_processed)
str(gee_stars)


```

